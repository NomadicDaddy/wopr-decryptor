<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta content="width=device-width, initial-scale=1.0" name="viewport" />
		<meta content="en" http-equiv="Content-Language" />
		<meta content="notranslate" name="google" />
		<title>WOPR Decryptor - Bare</title>
		<link href="./dist/styles.css" rel="stylesheet" />
		<style>
			body {
				margin: 0;
				padding: 0;
				background: #000;
				font-family: 'Courier New', monospace;
				display: flex;
				align-items: center;
				justify-content: center;
				height: 100vh;
				overflow: hidden;
			}
			#app {
				display: flex;
				justify-content: center;
				align-items: center;
			}
		</style>
	</head>
	<body>
		<div id="app"></div>

		<script type="module">
			import { WOPRDecryptor } from './dist/index.js';

			const wopr = new WOPRDecryptor({
				container: document.getElementById('app'),
				codes: ['CPE1704TKS', 'DEFCON-1', 'NORAD-ALPHA-7'],
				charset: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789',
				direction: 'random',
				cycles: 1,
				timing: {
					durationMs: 10000,
					tickInterval: 70,
				},
				audio: {
					enabled: false,
					volume: 0.12,
					tickFreq: 180,
					lockFreqStart: 900,
					lockFreqStep: 12,
				},
				probability: {
					enabled: false,
					base: 2.3,
					max: 99.9,
				},
				stream: {
					enabled: false,
					lines: 20,
					width: 22,
				},
				ui: {
					showHeader: false,
					showFooter: false,
					showProgress: false,
					showOverlay: false,
					blinkOnSolved: true,
					blinkDuration: 0,
					showCycles: false,
					title: '',
				},
			});

			// Start immediately
			wopr.start();

			// Keyboard controls
			window.addEventListener('keydown', (e) => {
				if (e.key === 'r' || e.key === 'R') {
					wopr.reset();
					wopr.start();
				}
				if (e.key === 'n' || e.key === 'N') {
					wopr.next();
					wopr.start();
				}
				if (e.key === ' ') {
					e.preventDefault();
					if (wopr.running) {
						wopr.stop();
					} else {
						wopr.start();
					}
				}
			});
		</script>
	</body>
</html>
